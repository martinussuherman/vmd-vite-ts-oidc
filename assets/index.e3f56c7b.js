import{a as s}from"./dom.c9fbe44a.js";function f(){return!0}function d(t,o,e){if(!t||r(t,e)===!1)return!1;const c=s(o);if(typeof ShadowRoot!="undefined"&&c instanceof ShadowRoot&&c.host===t.target)return!1;const u=(typeof e.value=="object"&&e.value.include||(()=>[]))();return u.push(o),!u.some(n=>n.contains(t.target))}function r(t,o){return(typeof o.value=="object"&&o.value.closeConditional||f)(t)}function l(t,o,e){const c=typeof e.value=="function"?e.value:e.value.handler;o._clickOutside.lastMousedownWasOutside&&d(t,o,e)&&setTimeout(()=>{r(t,e)&&c&&c(t)},0)}function i(t,o){const e=s(t);o(document),typeof ShadowRoot!="undefined"&&e instanceof ShadowRoot&&o(e)}const v={inserted(t,o,e){const c=n=>l(n,t,o),u=n=>{t._clickOutside.lastMousedownWasOutside=d(n,t,o)};i(t,n=>{n.addEventListener("click",c,!0),n.addEventListener("mousedown",u,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!0}),t._clickOutside[e.context._uid]={onClick:c,onMousedown:u}},unbind(t,o,e){!t._clickOutside||(i(t,c=>{var u;if(!c||!(!((u=t._clickOutside)===null||u===void 0)&&u[e.context._uid]))return;const{onClick:n,onMousedown:a}=t._clickOutside[e.context._uid];c.removeEventListener("click",n,!0),c.removeEventListener("mousedown",a,!0)}),delete t._clickOutside[e.context._uid])}};var O=v;export{O as C};
